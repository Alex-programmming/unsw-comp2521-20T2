<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>COMP2521 Final Exam </title>
<link rel='stylesheet' type='text/css' href='exam.css'></head>
<body>
<div align='center'>
<table width='100%' border='0'>
<tr valign='top'>
<td align='left' width='20%'>
  <span class='tiny'>COMP2521 Final Exam</span>
</td>
<td align='center' width='60%'>
  The University of New South Wales <br>
  <span class='heading'>COMP2521 Data Structures &amp; Algorithms <br>  Final Exam</span>
</td>
<td align='right' width='20%'>
  <span class='tiny'>Data Structures &amp; Algorithms</span>
</td>
</table>
</div>
<center><a href='index.html'>[Instructions]</a> <a target='Website' href='https://webcms3.cse.unsw.edu.au/COMP2521/20T2/'>[Website]</a> <a target='C' href='c-lang/index.html'>[C]</a> 
<br>
<b>[Q1]</b> <a href='Q02.html'>[Q2]</a> <a href='Q03.html'>[Q3]</a> <a href='Q04.html'>[Q4]</a> <a href='Q05.html'>[Q5]</a> <a href='Q06.html'>[Q6]</a> <a href='Q07.html'>[Q7]</a> <a href='Q08.html'>[Q8]</a> 
</center>
<hr>
<div style='margin-left:40px;margin-right:40px'>
<h3>Question 1 <span class='tiny'>(15 marks)</span></h3>
<p>
Consider a small databse of student records in a text file like:
</p>
<pre>
5012345:Smith, John:3707:65.0
9912345:Parameswaran, Sri:3707:99.0
5054321:Wang, David:3778:85.0
5012346:Smith, Janet:3778:75.0
6543210:Smith, James:3978:55.0
</pre>
<p>
Each line has the following information about one student:
zID, name, program code, WAM.
</p>
<p>
We have provided you with a program in <tt>stu.c</tt>
that reads such text files via its standard input,
stores the data into an array of <tt>Student</tt> records,
and then displays the contents of this array.
</p>
<p>
If the above data was in a file called <tt>data1</tt> and if
we were to compile and use <tt>stu.c</tt> unmodifed, it would
produce the following output:
</p>
<pre>
$ <b>make</b>
gcc -Wall -Werror -g   -c -o stu.o stu.c
gcc -o stu stu.o
$ <b>./stu < tests/data1</b>
5012345 Smith, John                              3707 65.0
9912345 Parameswaran, Sri                        3707 99.0
5054321 Wang, David                              3778 85.0
5012346 Smith, Janet                             3778 75.0
6543210 Smith, James                             3978 55.0
</pre>
<p>
The students records are in the same order as they were in the original file.
We want to be able to sort the records two ways: by zID or by name.
</p>
<p>
Your task is to complete the <tt>sortStudents</tt> function which sorts
the array of <tt>Student</tt> records in an order determined by one of
its parameters.
The function is defined as:
</p>
<pre>
void sortStudents(Student *stu, int n, Ordering order)
</pre>
<p>
The first parameter is a pointer to the first element in an array
of <tt>Student</tt> records.
The second parameter tells how many records are in the array.
The third parameter determines which field is used for sorting
and has two possible values: <tt>BY_ZID</tt> and <tt>BY_NAME</tt>.
</p>
<p>
The zID values are unique, so there is no issue in sorting them.
However, names are not unique. If there are several students
with the same name, they should appear as a group in the sorted
array, ordered by zID.
</p>
<p>
You should <em>not</em> change any other part of <tt>stu.c</tt>
except for the <tt>sortStudents()</tt> function, and any extra
extra helper functions that you want to add. If you change the
input and output functions or the <tt>main()</tt> function,
then you will probably fail all of the tests.
</p>
<p>
The code for this question is in the <tt>q1</tt> directory, which
contains:
<ul>
<li><tt>stu.c</tt> ... program for reading/sorting/displaying student records</li>
<li><tt>Makefile</tt> ...for building the program</li>
<li><tt>tests/</tt> ... directory containing test cases</li>
<li><tt>run_tests.sh</tt> ... script for running the tests
</ul>
<p>
You ought to look at the data structures, the main program and the
reading and writing functions, to familiarise yourself with the enviroment
in which the <tt>sortStudents()</tt> function operates.
</p>
<p>
You can compile the program using the <tt>make</tt> command.
This will give you an executable file called <tt>stu</tt>.
Examples of running the <tt>stu</tt> command are given below.
</p>
<p>
Now,complete the <tt>sortStudents()</tt> function.
You can define as many helper functions as you want.
It requires around 15-30 lines of code to solve this problem,
depending on how you solve it.
</p>
<p>
Submissions that don't compile are worth zero marks.
Submissions that compile, but fail all tests are worth up to 7 marks.
Submissions that compile and pass some tests are worth between 8
and 14 marks, depending on how close they are to a working solution.
Submissions that compile and pass all tests are worth 15 marks.
</p>
<p>
Examples of how the program ought to behave when working correctly:
</p>
<pre>
$ <b>./stu < tests/data2</b>
3333333 Smith, John                              3645 75.0
5012345 Smith, John                              3707 65.0
5012346 Smith, John                              3778 75.0
6123456 Apple, Steve                             3648 85.5
6543210 Smith, John                              3978 55.0
$ <b>./stu name < tests/data2</b>
6123456 Apple, Steve                             3648 85.5
3333333 Smith, John                              3645 75.0
5012345 Smith, John                              3707 65.0
5012346 Smith, John                              3778 75.0
6543210 Smith, John                              3978 55.0
</pre>
<p>
You should also be able to devise your own test cases.
</p>
<p>
To help you check whether your program is working correctly,
there is a script called <tt>run_tests.sh</tt> which will run
the program against all of the tests and report the results.
It will also add the output from your program into the 
<tt>tests</tt> directory; comparing your output against the
expected output might help you to debug your code.
You can run the testing script as:
</p>
<pre>
$ <b>sh run_tests.sh</b>
</pre>
<p>
Once your function is working (passes all tests), follow
the submission instructions below.
Even if it fails some (or even all) tests, you should submit because
you can get <i>some</i> marks.
If your program does not compile, or if you simply submit
the supplied code, then your "answer" is worth zero marks.
</p>
<p><b>Submission Instructions:</b></p>
<ul>
<li> Type your answer to this question into the file called <tt>stu.c</tt>
<li> Submit via: &nbsp; <b><tt>give cs2521 exam_q1 stu.c</tt></b> <br>
	or via: Webcms3 &gt; exams &gt; Final Exam &gt; Submit Q<nobr>1</nobr> &gt; Make Submission
</ul>

</div>
<center><i>End of Question</i></center>
</body>
</html>
